{
  "schemas": {
    "funapp": {

      "userViewGenerator": "./funapp_migration.js",

      "entities": {
        "Settings": {
          "columnFields": {
            "Name": { "fieldType": "string" },
            "Value": { "fieldType": "string" }
          },
          "uniqueConstraints": {
            "UniqueName": { "columns": [ "Name" ] }
          },
          "checkConstraints": {
            "NonEmptyName": { "expression": "\"Name\" <> ''" }
          },
          "mainField": "Name"
        },

        "MainMenuCategories": {
          "columnFields": {
            "Name": { "fieldType": "string" },
            "OrdinalPosition": { "fieldType": "int" }
          },
          "uniqueConstraints": {
            "UniqueName": { "columns": [ "Name" ] }
          },
          "checkConstraints": {
            "NonEmptyName": { "expression": "\"Name\" <> ''" }
          },
          "mainField": "Name"
        },

        "MainMenuButtons": {
          "columnFields": {
            "CategoryId": { "fieldType": "reference(\"funapp\".\"MainMenuCategories\")" },
            "SchemaName": { "fieldType": "string" },
            "UserViewName": { "fieldType": "string" },
            "OrdinalPosition": { "fieldType": "int" }
          },
          "computedFields": {
            "Name": { "expression": "\"CategoryId\"=>\"__main\" || '.' || \"SchemaName\" || '.' || \"UserViewName\"" }
          },
          "uniqueConstraints": {
            "UniqueButton": { "columns": [ "CategoryId", "SchemaName", "UserViewName" ] }
          },
          "checkConstraints": {
            "NonEmptySchema": { "expression": "\"SchemaName\" <> ''" },
            "NonEmptyUserView": { "expression": "\"UserViewName\" <> ''" }
          },
          "mainField": "Name"
        },

        "UserViewTranslations": {
          "columnFields": {
            "SchemaName": { "fieldType": "string" },
            "UserViewName": { "fieldType": "string" },
            "Language": { "fieldType": "string" },
            "Translation": { "fieldType": "string" }
          },
          "computedFields": {
            "Name": { "expression": "\"Language\" || '.' || \"SchemaName\" || '.' || \"UserViewName\"" }
          },
          "uniqueConstraints": {
            "UniqueTranslation": { "columns": [ "SchemaName", "UserViewName", "Language" ] }
          },
          "checkConstraints": {
            "NonEmptySchema": { "expression": "\"SchemaName\" <> ''" },
            "NonEmptyUserView": { "expression": "\"UserViewName\" <> ''" },
            "NonEmptyLanguage": { "expression": "\"Language\" <> ''" }
          },
          "mainField": "Name"
        },

        "FieldTranslations": {
          "columnFields": {
            "SchemaName": { "fieldType": "string" },
            "EntityName": { "fieldType": "string" },
            "FieldName": { "fieldType": "string" },
            "Language": { "fieldType": "string" },
            "Translation": { "fieldType": "string" }
          },
          "computedFields": {
            "Name": { "expression": "\"Language\" || '.' || \"SchemaName\" || '.' || \"EntityName\" || '.' || \"FieldName\"" }
          },
          "uniqueConstraints": {
            "UniqueTranslation": { "columns": [ "SchemaName", "EntityName", "FieldName", "Language" ] }
          },
          "checkConstraints": {
            "NonEmptySchema": { "expression": "\"SchemaName\" <> ''" },
            "NonEmptyEntity": { "expression": "\"EntityName\" <> ''" },
            "NonEmptyField": { "expression": "\"FieldName\" <> ''" },
            "NonEmptyLanguage": { "expression": "\"Language\" <> ''" }
          },
          "mainField": "Name"
        }

      },

      "roles": {
        "Observer": {
          "permissions": {
            "schemas": {

              "public": {
                "entities": {

                  "Schemas": {
                    "select": "true",
                    "fields": {
                      "Name": {
                        "select": "true"
                      }
                    }
                  },

                  "UserViews": {
                    "select": "true",
                    "fields": {
                      "SchemaId": {
                        "select": "true"
                      },
                      "Name": {
                        "select": "true"
                      }
                    }
                  }

                }
              },

              "funapp": {
                "entities": {

                  "Settings": {
                    "select": "true",
                    "fields": {
                      "Name": {
                        "select": "true"
                      },
                      "Value": {
                        "select": "true"
                      }
                    }
                  },

                  "MainMenuCategories": {
                    "select": "true",
                    "fields": {
                      "Name": {
                        "select": "true"
                      },
                      "OrdinalPosition": {
                        "select": "true"
                      }
                    }
                  },

                  "MainMenuButtons": {
                    "select": "true",
                    "fields": {
                      "CategoryId": {
                        "select": "true"
                      },
                      "SchemaName": {
                        "select": "true"
                      },
                      "UserViewName": {
                        "select": "true"
                      },
                      "OrdinalPosition": {
                        "select": "true"
                      }
                    }
                  },

                  "UserViewTranslations": {
                    "select": "true",
                    "fields": {
                      "SchemaName": {
                        "select": "true"
                      },
                      "UserViewName": {
                        "select": "true"
                      },
                      "Language": {
                        "select": "true"
                      },
                      "Translation": {
                        "select": "true"
                      }
                    }
                  },

                  "FieldTranslations": {
                    "select": "true",
                    "fields": {
                      "SchemaName": {
                        "select": "true"
                      },
                      "EntityName": {
                        "select": "true"
                      },
                      "FieldName": {
                        "select": "true"
                      },
                      "Language": {
                        "select": "true"
                      },
                      "Translation": {
                        "select": "true"
                      }
                    }
                  }

                }
              }

            }
          }
        }
      },

      "defaultAttributes": {
        "public": {
          "entities": {
            "UserViews": {
              "fields": {
                "Query": {
                  "attributes": "@{ \"TextType\" = 'codeeditor' }"
                }
              }
            }
          }
        }
      }

    }
  }
}