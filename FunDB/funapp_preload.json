{
  "schemas": {
    "funapp": {

      "userViewGenerator": "./funapp_migration.mjs",

      "entities": {

        "settings": {
          "columnFields": {
            "name": { "type": "string" },
            "value": { "type": "string" }
          },
          "uniqueConstraints": {
            "unique_name": { "columns": [ "name" ] }
          },
          "checkConstraints": {
            "non_empty_name": { "expression": "name <> ''" }
          },
          "mainField": "name"
        },

        "iframe_markups": {
          "columnFields": {
            "name": { "type": "string" },
            "markup": { "type": "string" }
          },
          "uniqueConstraints": {
            "unique_name": { "columns": [ "name" ] }
          },
          "checkConstraints": {
            "non_empty_name": { "expression": "name <> ''" }
          },
          "mainField": "name"
        },

        "color_themes": {
          "columnFields": {
            "name": { "type": "string" },
            "localized_name": { "type": "json", "isNullable": true }
          },
          "uniqueConstraints": {
            "unique_name": { "columns": [ "name" ] }
          },
          "checkConstraints": {
            "non_empty_name": { "expression": "name <> ''" }
          },
          "mainField": "name"
        },

        "color_variants": {
          "columnFields": {
            "name": { "type": "string" },
            "theme_id": { "type": "reference(\"funapp\".\"color_themes\")" },
            "foreground": { "type": "string", "isNullable": true },
            "background": { "type": "string", "isNullable": true },
            "border": { "type": "string", "isNullable": true }
          },
          "computedFields": {
            "full_name": { "expression": "theme_id=>name || name" }
          },
          "uniqueConstraints": {
            "unique_full_name": { "columns": [ "name", "theme_id" ] }
          },
          "checkConstraints": {
            "non_empty_name": { "expression": "name <> ''" }
          },
          "mainField": "full_name"
        }

      },

      "roles": {
        "observer": {
          "permissions": {
            "schemas": {

              "public": {
                "entities": {

                  "schemas": {
                    "select": "true",
                    "fields": {
                      "name": {
                        "select": "true"
                      }
                    }
                  },

                  "user_views": {
                    "select": "true",
                    "fields": {
                      "schema_id": {
                        "select": "true"
                      },
                      "name": {
                        "select": "true"
                      }
                    }
                  }

                }
              },

              "funapp": {
                "entities": {

                  "settings": {
                    "select": "true",
                    "fields": {
                      "name": {
                        "select": "true"
                      },
                      "value": {
                        "select": "true"
                      }
                    }
                  },

                  "iframe_markups": {
                    "select": "true",
                    "fields": {
                      "name": {
                        "select": "true"
                      },
                      "markup": {
                        "select": "true"
                      }
                    }
                  },

                  "color_themes": {
                    "select": "true",
                    "fields": {
                      "name": {
                        "select": "true"
                      },
                      "localized_name": {
                        "select": "true"
                      }
                    }
                  },

                  "color_variants": {
                    "select": "true",
                    "fields": {
                      "name": {
                        "select": "true"
                      },
                      "theme_id": {
                        "select": "true"
                      },
                      "foreground": {
                        "select": "true"
                      },
                      "background": {
                        "select": "true"
                      },
                      "border": {
                        "select": "true"
                      }
                    }
                  }

                }
              }

            }
          }
        }
      },

      "defaultAttributes": {
        "public": {
          "entities": {
            "user_views": {
              "fields": {
                "query": {
                  "attributes": "@{ text_type = 'codeeditor' }"
                }
              }
            },

            "fields_attributes": {
              "fields": {
                "attributes": {
                  "attributes": "@{ text_type = 'codeeditor' }"
                }
              }
            },

            "schemas": {
              "fields": {
                "user_view_generator_script": {
                  "attributes": "@{ text_type = 'codeeditor', language = 'javascript' }"
                }
              }
            },

            "triggers": {
              "fields": {
                "procedure": {
                  "attributes": "@{ text_type = 'codeeditor', language = 'javascript' }"
                }
              }
            },

            "actions": {
              "fields": {
                "function": {
                  "attributes": "@{ text_type = 'codeeditor', language = 'javascript' }"
                }
              }
            },

            "modules": {
              "fields": {
                "source": {
                  "attributes": "@{ text_type = 'codeeditor', language = 'javascript' }"
                }
              }
            }
          }
        }
      }

    }
  }
}
