<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputName>FunWithFlags.FunDB</OutputName>
    <TargetFramework>netcoreapp2.0</TargetFramework>

    <!-- Store generated parsers in intermediate build directory -->
    <RootIntermediateOutputPath>obj</RootIntermediateOutputPath>
    <FsLexOutputFolder>$(RootIntermediateOutputPath)/gen/</FsLexOutputFolder>
    <FsYaccOutputFolder>$(RootIntermediateOutputPath)/gen/</FsYaccOutputFolder>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="src/Utils.fs" />
    <Compile Include="src/Attribute.fs" />

    <Compile Include="src/SQL/Utils.fs" />
    <Compile Include="src/SQL/Value.fs" />
    <Compile Include="src/SQL/AST.fs" />
    <Compile Include="src/SQL/Parse.fs" />
    <Compile Include="src/SQL/Render.fs" />
    <Compile Include="src/SQL/Query.fs" />
    <Compile Include="src/SQL/Migration.fs" />

    <Compile Include="src/FunQL/AST.fs" />
    <FsYacc Include="src/FunQL/Parser.fsy">
      <OtherFlags>--module FunWithFlags.FunDB.FunQL.Parser --internal</OtherFlags>
    </FsYacc>
    <Compile Include="$(RootIntermediateOutputPath)/gen/Parser.fs" />
    <FsLex Include="src/FunQL/Lexer.fsl">
      <OtherFlags>--unicode</OtherFlags>
    </FsLex>
    <Compile Include="$(RootIntermediateOutputPath)/gen/Lexer.fs" />
    <Compile Include="src/FunQL/Qualifier.fs" />
    <Compile Include="src/FunQL/Compiler.fs" />
    <Compile Include="src/FunQL/PrettyPrinter.fs" />

    <Compile Include="src/SQL/Meta.fs" />
    <Compile Include="src/FunQL/Meta.fs" />

    <Compile Include="src/View.fs" />

    <Compile Include="src/Context.fs" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Npgsql" Version="3.2.*" />
    <PackageReference Include="FsLexYacc" Version="7.0.*" />
    <PackageReference Include="YC.PrettyPrinter" Version="0.0.5" />

    <ProjectReference Include="../FunCore/FunCore.csproj" />
  </ItemGroup>

</Project>
