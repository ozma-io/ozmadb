<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputName>FunWithFlags.FunDB</OutputName>
    <TargetFramework>netcoreapp2.0</TargetFramework>

    <!-- Store generated parsers in intermediate build directory -->
    <RootIntermediateOutputPath>obj</RootIntermediateOutputPath>
    <FsLexOutputFolder>$(RootIntermediateOutputPath)/gen/</FsLexOutputFolder>
    <FsYaccOutputFolder>$(RootIntermediateOutputPath)/gen/</FsYaccOutputFolder>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="src/Utils.fs" />
    <Compile Include="src/Attribute.fs" />
    <Compile Include="src/Parsing.fs" />

    <Compile Include="src/SQL/Utils.fs" />
    <Compile Include="src/SQL/AST.fs" />
    <FsYacc Include="src/SQL/SQLParser.fsy" OtherFlags="--module FunWithFlags.FunDB.SQL.Parser --internal" />
    <Compile Include="$(RootIntermediateOutputPath)/gen/SQLParser.fs" />
    <FsLex Include="src/SQL/SQLLexer.fsl" OtherFlags="--unicode" />
    <Compile Include="$(RootIntermediateOutputPath)/gen/SQLLexer.fs" />
    <Compile Include="src/SQL/Qualifier.fs" />
    <Compile Include="src/SQL/Render.fs" />
    <Compile Include="src/SQL/Query.fs" />
    <Compile Include="src/SQL/Migration.fs" />
    <Compile Include="src/SQL/Meta.fs" />
    <Compile Include="src/SQL/Evaluate.fs" />

    <Compile Include="src/FunQL/Utils.fs" />
    <Compile Include="src/FunQL/AST.fs" />
    <FsYacc Include="src/FunQL/FunQLParser.fsy" OtherFlags="--module FunWithFlags.FunDB.FunQL.Parser --internal" />
    <Compile Include="$(RootIntermediateOutputPath)/gen/FunQLParser.fs" />
    <FsLex Include="src/FunQL/FunQLLexer.fsl" OtherFlags="--unicode" />
    <Compile Include="$(RootIntermediateOutputPath)/gen/FunQLLexer.fs" />
    <Compile Include="src/FunQL/Qualifier.fs" />
    <Compile Include="src/FunQL/Compiler.fs" />
    <Compile Include="src/FunQL/PrettyPrinter.fs" />
    <Compile Include="src/FunQL/Meta.fs" />

    <Compile Include="src/View.fs" />

    <Compile Include="src/Context.fs" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Npgsql" Version="3.2.*" />
    <PackageReference Include="FsLexYacc" Version="7.0.*" />
    <PackageReference Include="YC.PrettyPrinter" Version="0.0.5" />

    <ProjectReference Include="../FunCore/FunCore.csproj" />
  </ItemGroup>

</Project>
